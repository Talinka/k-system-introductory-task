(this["webpackJsonpk-system-introductory-task"]=this["webpackJsonpk-system-introductory-task"]||[]).push([[0],{100:function(e,t,n){e.exports=n(240)},239:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var a,r=n(0),u=n.n(r),c=n(17),s=n.n(c),l=n(18),o=n(99),i=n.n(o),m=n(19),f=n(23),d=n.n(f),E=n(36),b=n(25),g=Object(E.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/k-system-introductory-task/users.json");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e.catch(0),new Error("Error then loading user list from server. ".concat(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),p=Object(b.b)({name:"users",initialState:{users:[],isLoading:!1,error:null},reducers:{getUsersStart:function(e){e.isLoading=!0},getUsersSuccess:function(e,t){var n=t.payload;e.users=n,e.isLoading=!1,e.error=null},getUsersFailure:function(e,t){e.isLoading=!1,e.error=t.payload},changeUserStatus:function(e,t){var n=t.payload,a=n.user,r=n.newStatus,u=e.users.findIndex((function(e){return e.id===a.id}));e.users[u].status=r}}}),v=p.actions,S=v.getUsersStart,j=v.getUsersSuccess,h=v.getUsersFailure,k=v.changeUserStatus,O=p.reducer,w=function(){var e=Object(E.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(S()),e.next=4,g();case 4:n=e.sent,t(j(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(h(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),y=n(89),C=n.n(y),U=n(38);!function(e){e[e.New=0]="New",e[e.Verified=1]="Verified",e[e.VIP=2]="VIP"}(a||(a={}));var x,V=a,I=n(86),L=n.n(I),N=n(87),P=n.n(N),F=n(88),J=n.n(F),B=n(82),q=n.n(B),z=n(84),A=n.n(z),D=n(85),G=n.n(D),H=(x={},Object(U.a)(x,V.New,u.a.createElement(q.a,null)),Object(U.a)(x,V.Verified,u.a.createElement(A.a,null)),Object(U.a)(x,V.VIP,u.a.createElement(G.a,null)),x);var K=function(e){var t=e.user,n=e.onClick,a=t.name,r=t.status;return u.a.createElement(L.a,{button:!0,onClick:function(){n(t)}},u.a.createElement(P.a,null,H[r]),u.a.createElement(J.a,{primary:a}))},M=function(e){var t=e.users,n=e.onClick;return u.a.createElement(C.a,null,t.map((function(e){return u.a.createElement(K,{user:e,key:e.id,onClick:n})})))},Q=n(37),R=n.n(Q),T=n(94),W=n.n(T),X=n(98),Y=n.n(X),Z=n(96),$=n.n(Z),_=n(97),ee=n.n(_),te=n(95),ne=n.n(te),ae=n(93),re=n.n(ae),ue=n(91),ce=n.n(ue),se=n(90),le=n.n(se),oe=n(92),ie=n.n(oe),me=["New","Verified","VIP"],fe=function(e){var t=e.status,n=e.onStatusChange,a=Object(r.useState)(String(t)),c=Object(m.a)(a,2),s=c[0],l=c[1];return u.a.createElement(le.a,null,u.a.createElement(ce.a,{row:!0,"aria-label":"status",name:"status",value:s.toString(),onChange:function(e,t){l(t),n(Number(t))}},me.map((function(e,t){return u.a.createElement(ie.a,{key:t,value:t.toString(),control:u.a.createElement(re.a,null),label:e})}))))},de=function(e){var t=e.user,n=e.currentStatus,a=e.open,c=e.onSubmit,s=t.name,l=Object(r.useState)(n),o=Object(m.a)(l,2),i=o[0],f=o[1],d=function(e){return function(){c(t,i,e)}};return u.a.createElement(W.a,{open:a,onClose:d(!1),"aria-labelledby":"form-dialog-title"},u.a.createElement(ne.a,{id:"form-dialog-title"},"Change user status"),u.a.createElement($.a,null,u.a.createElement(ee.a,null,"Select status for user ".concat(s,":")),u.a.createElement(fe,{status:t.status,onStatusChange:function(e){f(e)}})),u.a.createElement(Y.a,null,u.a.createElement(R.a,{onClick:d(!1),color:"primary"},"Cancel"),u.a.createElement(R.a,{onClick:d(!0),color:"primary"},"Save")))},Ee=function(e){var t=e.users,n=Object(r.useState)(!1),a=Object(m.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(t[0]),i=Object(m.a)(o,2),f=i[0],d=i[1],E=Object(l.b)();return u.a.createElement("div",null,u.a.createElement(M,{users:t,onClick:function(e){d(e),s(!0)}}),t.length>0&&u.a.createElement(de,{user:f,open:c,currentStatus:f.status,onSubmit:function(e,t,n){n&&E(k({user:e,newStatus:t})),s(!1)}}))};var be=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.users})),n=t.users,a=t.isLoading,c=t.error;return Object(r.useEffect)((function(){e(w)}),[]),c?u.a.createElement("div",null,u.a.createElement("h1",null,"Something went wrong..."),u.a.createElement("div",null,c)):u.a.createElement("div",null,u.a.createElement("h2",null,"User list"),a?u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,null),u.a.createElement("div",null,"Loading...")):u.a.createElement(Ee,{users:n}))},ge=n(16),pe=Object(ge.c)({users:O}),ve=Object(b.a)({reducer:pe});n(239);s.a.render(u.a.createElement(l.a,{store:ve},u.a.createElement(be,null)),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.6a963c19.chunk.js.map